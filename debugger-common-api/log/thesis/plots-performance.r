#!/usr/bin/Rscript
require(ggplot2)

times = read.csv("naive/times.csv")
levels(times$browser) <- c("Chromium", "Firefox")

# use cairo_pdf for UTF8 support, see http://stackoverflow.com/questions/12768176/unicode-characters-in-ggplot2-pdf-output
cairo_pdf("performance.pdf", family="Myriad Pro", width=9, height=5)
print(
  ggplot(times[times$breakpointsPerLine == 0.1,], aes(x = testcase, y = ms, fill = browser, color = browser, alpha = factor(actions)))
  # + geom_point()
  + scale_fill_manual(values = c("#0266C8", "#E66000"))
  + scale_color_manual(values = c("#0266C8", "#E66000"))
  + theme(axis.text.x = element_text(angle = 45, hjust = 1))
  + guides(fill = FALSE, color=FALSE)
  # + geom_point()
  + geom_bar(stat = "identity", width = .8, position = "dodge", size = .1)
  + labs(y = "Runtime in Seconds", x = "Test Program", alpha = "Number of \nResumes/Steps")
  + facet_wrap(~browser,nrow = 2, strip.position="right")
  + coord_cartesian(ylim=c(0, 16000))
  # + facet_grid(breakpointsPerLine~actions)
  + theme(strip.background=element_rect(fill="white"))
  #+ theme(legend.position="bottom")
  + scale_y_continuous(labels=function(x)x/1000)
  + scale_alpha_discrete(range = c(0.05, 1))
  # + scale_fill_manual(values=sc)
  # + scale_fill_gradient(low = "white", high = "#E66000")
  # +scale_fill_brewer()
)
# print(
#   ggplot(times[times$breakpointsPerLine == 0.1,], aes(x = actions, y = ms, color = browser))
#   # + geom_point()
#   # + scale_fill_manual(values = c("#0266C8", "#E66000"))
#   # + theme(axis.text.x = element_text(angle = 45, hjust = 1))
#    + geom_point()
#   + geom_line()
#   + labs(y = "Runtime in ms", x = "Test Program", fill = "Number of Resumes\nand Steps")
#   + facet_wrap(~testcase,nrow = 5)
#   # + facet_grid(breakpointsPerLine~actions)
#   + theme(strip.background=element_rect(fill="white"))
#   #+ theme(legend.position="bottom")
# )
dev.off()
